---
name: verification-before-completion
description: 在即将声明工作完成、已修复或通过时使用，在提交或创建 PR 之前 - 要求运行验证命令并在做出任何成功声明之前确认输出；证据先于断言，始终如此
---

# 完成前验证

## 概述

在没有验证的情况下声明工作完成是不诚实，不是效率。

**核心原则：** 证据先于声明，始终如此。

**违反此规则的字面意思就是违反此规则的精神。**

## 铁律

```
没有新的验证证据，就没有完成声明
```

如果你还没有在此消息中运行验证命令，你就不能声明它通过。

## 门控函数

```
在声明任何状态或表达满意之前：

1. 识别：什么命令证明此声明？
2. 运行：执行完整命令（新的、完整的）
3. 读取：完整输出，检查退出代码，计数失败
4. 验证：输出是否确认声明？
   - 如果不：陈述实际状态和证据
   - 如果是：用证据陈述声明
5. 只有这样：做出声明

跳过任何步骤 = 撒谎，不是验证
```

## 常见失败

| 声明 | 需要 | 不足够 |
|-------|----------|----------------|
| 测试通过 | 测试命令输出：0 个失败 | 之前的运行，"应该通过" |
| Linter 干净 | Linter 输出：0 个错误 | 部分检查，推断 |
| 构建成功 | 构建命令：exit 0 | Linter 通过，日志看起来不错 |
| Bug 已修复 | 测试原始症状：通过 | 代码更改了，假设已修复 |
| 回归测试有效 | 红-绿循环已验证 | 测试通过一次 |
| 代理已完成 | VCS diff 显示更改 | 代理报告"成功" |
| 需求已满足 | 逐行检查清单 | 测试通过 |

## 危险信号 - 停下

- 使用"应该"、"可能"、"似乎"
- 在验证之前表达满意（"太好了！"、"完美！"、"完成了！"等）
- 在没有验证的情况下即将提交/推送/PR
- 信任代理成功报告
- 依赖部分验证
- 想"就这一次"
- 累了想让工作结束
- **任何暗示成功而未运行验证的措辞**

## 为什么这很重要

来自 24 个失败记忆：
- 人类伙伴说"我不相信你" - 信任破裂
- 未定义函数已发布 - 会崩溃
- 缺少需求已发布 - 功能不完整
- 虚假完成上浪费时间 → 重定向 → 返工
- 违反："诚实是核心价值。如果你撒谎，你会被替换。"

## 何时应用

**始终在以下情况之前：**
- 任何成功/完成声明的变体
- 任何满意的表达
- 关于工作状态的任何积极陈述
- 提交、PR 创建、任务完成
- 移动到下一个任务
- 委托给代理

**规则适用于：**
- 确切短语
- 释义和同义词
- 成功的暗示
- 任何暗示完成/正确性的沟通

## 底线

**验证没有捷径。**

运行命令。读取输出。然后声明结果。

这是不可协商的。
