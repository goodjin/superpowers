---
name: subagent-driven-development
description: 在当前会话中执行具有独立任务的实现计划时使用
---

# 子代理驱动开发

通过为每个任务分派新的子代理来执行计划，每个任务之后进行两阶段审查：首先是规格符合性审查，然后是代码质量审查。

**核心原则：** 每个任务使用新的子代理 + 两阶段审查（规格然后质量）= 高质量，快速迭代

## 何时使用

**与执行计划（并行会话）相比：**
- 同一会话（无上下文切换）
- 每个任务使用新的子代理（无上下文污染）
- 每个任务之后进行两阶段审查：规格符合性优先，然后是代码质量
- 更快的迭代（任务之间无需人工介入）

## 流程

1. 读取计划，提取所有任务及完整文本，记录上下文，创建 TodoWrite
2. 为每个任务分派实现者子代理（./implementer-prompt.md）
3. 分派规格审查者子代理（./spec-reviewer-prompt.md）
4. 分派代码质量审查者子代理（./code-quality-reviewer-prompt.md）
5. 在 TodoWrite 中标记任务完成
6. 重复直到所有任务完成
7. 分派最终代码审查者子代理进行整个实现审查
8. 使用 superpowers:finishing-a-development-branch

## 提示模板

- `./implementer-prompt.md` - 分派实现者子代理
- `./spec-reviewer-prompt.md` - 分派规格符合性审查者子代理
- `./code-quality-reviewer-prompt.md` - 分派代码质量审查者子代理

## 优势

**与手动执行相比：**
- 子代理自然地遵循 TDD
- 每个任务都有新的上下文（无混淆）
- 并行安全（子代理不相互干扰）
- 子代理可以提问（工作前和工作期间）

**与执行计划相比：**
- 同一会话（无交接）
- 持续进展（无需等待）
- 审查检查点自动

**质量保证：**
- 自我审查在交接前捕获问题
- 两阶段审查：规格符合性，然后代码质量
- 审查循环确保修复实际有效
- 规格符合性防止过度/不足构建
- 代码质量确保实现构建良好

## 危险信号

**永远不要：**
- 跳过审查（规格符合性或代码质量）
- 带着未修复的问题继续
- 并行分派多个实现子代理（冲突）
- 让子代理读取计划文件（提供完整文本代替）
- 忽略子代理问题（在让他们继续之前回答）
- 接受规格符合性的"足够接近"（规格审查者发现问题 = 未完成）
- 跳过审查循环（审查者发现问题 = 实现者修复 = 再次审查）
- 让实现者自我审查取代实际审查（两者都需要）
- **在规格符合性达到 ✅ 之前开始代码质量审查**（顺序错误）
- 在任一审查有未解决问题时移动到下一个任务

## 集成

**必需的工作流技能：**
- **superpowers:writing-plans** - 创建此技能执行的计划
- **superpowers:requesting-code-review** - 审查者子代理的代码审查模板
- **superpowers:finishing-a-development-branch** - 所有任务完成后完成开发

**子代理应该使用：**
- **superpowers:test-driven-development** - 子代理为每个任务遵循 TDD

**替代工作流：**
- **superpowers:executing-plans** - 用于并行会话而不是同一会话执行
